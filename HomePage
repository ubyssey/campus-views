<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

  <div id="Pictures">
    <div id="vrview"> </div>
    <div class="Gallery">
      <ul class="carousel">
        <li class="tooltip">
       <a href="#marineDrive">
          <img src="https://github.com/ubyssey/campus-views/blob/master/VR_Photos/MARINE%20DRIVE%20THUMBNAIL.png?raw=true"
          style="width:100px;height:100px;">
          </a>
          <span class="tooltiptext"> Marine Drive </span>
        </li>
        <li class="tooltip">
          <a href="#mosquitoField">
          <img src="https://github.com/ubyssey/campus-views/blob/master/VR_Photos/MOSQ%20FIELD%20THUMBNAIL.png?raw=true"
          style="width:100px;height:100px;">
          </a>
          <span class="tooltiptext"> Mosquito Field </span>
        </li>
          <li class="tooltip">
          <a href="#MOA">
          <img src="https://github.com/ubyssey/campus-views/blob/master/VR_Photos/MOA%20GALLERY%20THUMBNAIL.png?raw=true"
          style="width:100px;height:100px;">
          </a>
          <span class="tooltiptext"> Museum of Anthropology </span>
        </li>
        </ul>
    </div>
  </div>

<style>
  html, body {
    height: 100%;

  }

  body {
    background-color: dimgray;
    color: whitesmoke;
    margin: 0;
  }

   * {
      font-family: courier;
    }

  .Gallery ul {
    display: inline-flex;
  }

  .carousel {
    flex-direction: row;
  }

  ul.carousel {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  ul img {
    display: block;
  }

  #Pictures {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  #vrview {
    flex: 1;
  }

/* Tooltip container */
.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black; /* dots under the hoverable text */
}

/* Tooltip text */
.tooltip .tooltiptext {
    visibility: hidden;
    width: 120px;
    bottom: 100%;
    left: 50%;
    margin-left: -60px; /* Use half of the width (120/2 = 60), to center the tooltip */
    background-color: black;
    color: #fff;
    text-align: center;
    padding: 5px 0;
    border-radius: 6px;

    /* Position the tooltip text */
    position: absolute;
    z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
    visibility: visible;
}
</style>

<script>
//Google VR API script to swap out photos
var vrView;
var browserHeight = $(window).height();
var carouselHeight = $('.Gallery').height();
console.log(carouselHeight);
console.log(browserHeight);
// All the scenes for the experience
var scenes = {
  marineDrive: {
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/20170310_170708.jpg',
  },
  mosquitoField: {
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/Mosquito_Field.jpg',
  },
  MOA: {
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/MOA.jpg',
  }
};

function onLoad() {
  vrView = new VRView.Player('#vrview', {
    width: '100%',
    height: browserHeight - carouselHeight,
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/20170310_170708.jpg',
    is_stereo: false,
    is_autopan_off: true
  });

  vrView.on('ready', onVRViewReady);
  vrView.on('modechange', onModeChange);
  vrView.on('error', onVRViewError);
}

function loadScene(id) {
  console.log('loadScene', id);

  // Set the image
  vrView.setContent({
    image: scenes[id].image,
    preview: scenes[id].preview,
    is_autopan_off: true
  });

  // Unhighlight carousel items
  var carouselLinks = document.querySelectorAll('ul.carousel li a');
  for (var i = 0; i < carouselLinks.length; i++) {
    carouselLinks[i].classList.remove('current');
  }

  // Highlight current carousel item
  document.querySelector('ul.carousel li a[href="#' + id + '"]')
      .classList.add('current');
}

function onVRViewReady(e) {
  console.log('onVRViewReady');

  // Create the carousel links
  var carouselItems = document.querySelectorAll('ul.carousel li a');
  for (var i = 0; i < carouselItems.length; i++) {
    var item = carouselItems[i];
    item.disabled = false;

    item.addEventListener('click', function(event) {
      event.preventDefault();

      loadScene(event.target.parentNode.getAttribute('href').substring(1));
    });
  }
  loadScene('marineDrive');
}

function onModeChange(e) {
  console.log('onModeChange', e.mode);
}

function onVRViewError(e) {
  console.log('Error! %s', e.message);
}

window.addEventListener('load', onLoad);
</script>

</body>
</html>

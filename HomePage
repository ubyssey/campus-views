<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

  <div id="Pictures">
    <div id="vrview"> </div>
    <div class="Gallery">
      <ul class="carousel">
        <li>
          <a href="#mosquitoFeild">
          <img src="https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/Mosquito_Feild.jpg" style="width:100px;height:100px;">
          </a>
        </li>
        <li>
          <a href="#marineDrive">
          <img src="https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/20170310_170708.jpg" style="width:100px;height:100px;">
          </a>
        </li>
      </ul>
    </div>
  </div>

<style>
  html, body {
    height: 100%;
  }

  body {
    background-color: dimgray;
    color: whitesmoke;
    margin: 0;
  }

  .Gallery ul {
    display: inline-flex;
  }

  .carousel {
    flex-direction: row;
  }

  ul.carousel {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  ul img {
    display: block;
  }

  #Pictures {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  #vrview {
    flex: 1;
  }

</style>


<script>
  $(document).ready(function(){

    // console.log('ready');
    //   $("#OpenContent").css('margin-top', $(window).height() / 2);
    //   $("#OpenContent").hide();
    //   $("#OpenContent").fadeIn(1500);
    //   $("#Pictures").hide();
    //   $("#vrview").hide();
    //   $("#SwitchImage").hide();
    //   $("#OpenContent").click(function(){
    //       $(this).fadeOut(2000);
    //       $("#Pictures").fadeIn(2000);
    //       $("#vrview").fadeIn(2000);
    //   });

  });
</script>

<script>
//Google VR API script to swap out photos
var vrView;
var browserHeight = $(window).height();
// All the scenes for the experience
var scenes = {
  marineDrive: {
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/20170310_170708.jpg',
  },
  mosquitoFeild: {
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/Mosquito_Feild.jpg',
  },
};

function onLoad() {
  vrView = new VRView.Player('#vrview', {
    width: '100%',
    height: '100%',
    image: 'https://raw.githubusercontent.com/ubyssey/campus-views/master/VR_Photos/20170310_170708.jpg',
    is_stereo: false,
    is_autopan_off: true
  });

  vrView.on('ready', onVRViewReady);
  vrView.on('modechange', onModeChange);
  vrView.on('error', onVRViewError);
}

function loadScene(id) {
  console.log('loadScene', id);

  // Set the image
  vrView.setContent({
    image: scenes[id].image,
    preview: scenes[id].preview,
    is_autopan_off: true
  });

  // Unhighlight carousel items
  var carouselLinks = document.querySelectorAll('ul.carousel li a');
  for (var i = 0; i < carouselLinks.length; i++) {
    carouselLinks[i].classList.remove('current');
  }

  // Highlight current carousel item
  document.querySelector('ul.carousel li a[href="#' + id + '"]')
      .classList.add('current');
}

function onVRViewReady(e) {
  console.log('onVRViewReady');

  // Create the carousel links
  var carouselItems = document.querySelectorAll('ul.carousel li a');
  for (var i = 0; i < carouselItems.length; i++) {
    var item = carouselItems[i];
    item.disabled = false;

    item.addEventListener('click', function(event) {
      event.preventDefault();
      loadScene(event.target.parentNode.getAttribute('href').substring(1));
    });
  }
  loadScene('marineDrive');
}

function onModeChange(e) {
  console.log('onModeChange', e.mode);
}

function onVRViewError(e) {
  console.log('Error! %s', e.message);
}

window.addEventListener('load', onLoad);
</script>

</body>
</html>
